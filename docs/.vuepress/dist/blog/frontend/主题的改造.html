<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>主题的改造 | JsShou</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.6ab1fdca.css" as="style"><link rel="preload" href="/assets/js/app.291ebe70.js" as="script"><link rel="preload" href="/assets/js/3.512bb35b.js" as="script"><link rel="preload" href="/assets/js/2.1d6f122e.js" as="script"><link rel="preload" href="/assets/js/12.de4d1582.js" as="script"><link rel="prefetch" href="/assets/js/10.3e5cc423.js"><link rel="prefetch" href="/assets/js/11.d5a8347b.js"><link rel="prefetch" href="/assets/js/13.6f5680d3.js"><link rel="prefetch" href="/assets/js/14.b44e8559.js"><link rel="prefetch" href="/assets/js/15.a109fa1f.js"><link rel="prefetch" href="/assets/js/16.afeca34f.js"><link rel="prefetch" href="/assets/js/17.f24bfbd9.js"><link rel="prefetch" href="/assets/js/4.9fba871f.js"><link rel="prefetch" href="/assets/js/5.ef76a0a1.js"><link rel="prefetch" href="/assets/js/6.dac9a369.js"><link rel="prefetch" href="/assets/js/7.189d3113.js"><link rel="prefetch" href="/assets/js/8.d940fe87.js"><link rel="prefetch" href="/assets/js/9.7b0ed1d4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6ab1fdca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container reform"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">JsShou</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frontend/" class="nav-link router-link-active">前端</a></li><li class="dropdown-item"><!----> <a href="/blog/computer/" class="nav-link">计算机基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/document/barrage/" class="nav-link">弹幕插件文档</a></li></ul></div></div><div class="nav-item"><a href="/tagsaaa/" class="nav-link">标签云</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div> <a href="https://github.com/xuzhongpeng1" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frontend/" class="nav-link router-link-active">前端</a></li><li class="dropdown-item"><!----> <a href="/blog/computer/" class="nav-link">计算机基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/document/barrage/" class="nav-link">弹幕插件文档</a></li></ul></div></div><div class="nav-item"><a href="/tagsaaa/" class="nav-link">标签云</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div> <a href="https://github.com/xuzhongpeng1" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/blog/frontend/" class="sidebar-link">前端</a></li><li><a href="/blog/frontend/前端跨域的几种解决.html" class="sidebar-link">前端跨域</a></li><li><a href="/blog/frontend/手写一个promise.html" class="sidebar-link">手写一个promise</a></li><li><a href="/blog/frontend/主题的改造.html" class="active sidebar-link">主题的改造</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/frontend/主题的改造.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/blog/frontend/主题的改造.html#第一步配置的修改" class="sidebar-link">第一步配置的修改</a></li><li class="sidebar-sub-header"><a href="/blog/frontend/主题的改造.html#第二步文件夹建立" class="sidebar-link">第二步文件夹建立</a></li><li class="sidebar-sub-header"><a href="/blog/frontend/主题的改造.html#第三步新建-tags-组件" class="sidebar-link">第三步新建 Tags 组件</a></li><li class="sidebar-sub-header"><a href="/blog/frontend/主题的改造.html#第四步-页面显示标签页及标签页跳转" class="sidebar-link">第四步 页面显示标签页及标签页跳转</a></li></ul></li></ul> </aside> <!----> <main class="page" data-v-1c2bf670> <!----> <div class="content default" data-v-1c2bf670><h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2> <p>上一章已经讲了 vuepress 主题如何实现继承，这样我们可以任意修改默认主题的任何组件及样式了。我们知道 vuepress 是无法自动根据我们 markdown 文件中的</p> <div class="language- extra-class"><pre class="language-text"><code>---
tags:
- js
- vue
---
</code></pre></div><p>生成标签云的页面的，而一个博客，标签在其中有知识分类及导航功能，是必不可少的一环，下面带领大家来改造一下默认主题让它能支持自动生成标签云页面</p> <h2 id="第一步配置的修改"><a href="#第一步配置的修改" aria-hidden="true" class="header-anchor">#</a> 第一步配置的修改</h2> <p>既然是主题，就要提供可定制化，如果有人不需要 tag 功能，那也需要满足需求，打开 config.js 文件，修改其中的配置
</p> <div class="language- extra-class"><pre class="language-text"><code>themeConfig: {
    ...
    tags:&quot;/tags&quot;,
    ...
    nav: [
    ...
        {
            text:&quot;标签云&quot;,
            link:'/tags/',
            tags:true
        },
    ...
    ]
    ...
}
</code></pre></div><p>我这样配置的原因是 nav 是给头部目录添加菜单，tags:&quot;/tags&quot;是定义标签路由路径，这样不管我的标签页定义成什么名字，都能导航到正确的位置。</p> <h2 id="第二步文件夹建立"><a href="#第二步文件夹建立" aria-hidden="true" class="header-anchor">#</a> 第二步文件夹建立</h2> <p>由于 vuepress 是根据 markdown 文件生成的路由，所以想要生成一个标签的页面也必须建立一个 markdown 文件。
在.vuepress 文件夹下建立 tags 文件夹，其中新建 README.md 文件。
重启项目
可看到<img src="https://blog-1253495453.cos.ap-chongqing.myqcloud.com/a.png" alt="启动图片"></p> <h2 id="第三步新建-tags-组件"><a href="#第三步新建-tags-组件" aria-hidden="true" class="header-anchor">#</a> 第三步新建 Tags 组件</h2> <p>在 docs/.vuepress/theme/components 下新建 Tags.vue 文件。
为了使页面自动集成 tag 组件，需要修改 Layout.vue 组件，上一节我们讲过要修改默认主题可以用组件的继承，现在把默认主题的 Layout 组件复制到 docs/.vuepress/theme/layouts 目录下(如果不知道如何复制默认主题的 Layout 请看上一节)，修改其中的</p> <div class="language- extra-class"><pre class="language-text"><code>...
    &lt;/Sidebar&gt;
    &lt;!-- 侧边栏 --&gt;
    &lt;Home v-if=&quot;$page.frontmatter.home&quot;/&gt;
    &lt;!-- 如果md文件中有 home:true 就使用该组件 --&gt;
    &lt;Tags v-else-if=&quot;tags&quot;/&gt;
    &lt;Page
        v-else
        :sidebar-items=&quot;sidebarItems&quot;
        &gt;
            &lt;slot
            name=&quot;page-top&quot;
            slot=&quot;top&quot;
            /&gt;
            &lt;slot
            name=&quot;page-bottom&quot;
            slot=&quot;bottom&quot;
            /&gt;
    &lt;/Page&gt;
...
</code></pre></div><p>引入 Tags 组件，其中的 tags 是判断当前页面路由 tags 是否为 true，这是 config.js 中配置的选项。
在新建的 Tags.vue 文件中加入以下内容</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;div class=&quot;content default&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;tag&quot;&gt;
      &lt;div class=&quot;items&quot;&gt;
        &lt;span
          v-for=&quot;taginfo in tags&quot;
          :style=&quot;{backgroundColor:color()}&quot;
          @click=&quot;change(taginfo.tag)&quot;
          :class=&quot;taginfo.tag===tg?'active':''&quot;
        &gt;{{taginfo.tag}}({{taginfo.number}})&lt;/span&gt;
      &lt;/div&gt;
      &lt;div class=&quot;article-list&quot;&gt;
        &lt;Article v-for=&quot;tag in info&quot; :tag=&quot;tag&quot; :tg=&quot;tg&quot; @turnTo=&quot;change&quot;/&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Article from &quot;@theme/components/Article.vue&quot;;
export default {
  components: {
    Article
  },
  data() {
    return {
      info: [],
      tg: &quot;&quot;
    };
  },
  computed: {
    tags() {
      //核心代码，整合markdown中tags的数目
      let allTags = [];
      this.$site.pages.forEach(v =&gt; {
        if (v.frontmatter.tags) {
          allTags.push(v.frontmatter.tags);
        } else if (v.frontmatter.tag) {
          allTags.push(v.frontmatter.tag);
        }
      });
      allTags = allTags.join(&quot;,&quot;).split(&quot;,&quot;);
      let flatTags = Array.from(new Set(allTags));
      return flatTags.reduce((res, v) =&gt; {
        let o = {};
        o.tag = v;
        o.number = allTags.filter(value =&gt; value === v).length;
        res.push(o);
        return res;
      }, []);
    }
  },
  methods: {
    change(tag) {
      //点击标签下面文章显示对应的内容
      this.tg = tag;
      this.info = this.$site.pages.filter(v =&gt; {
        let tags = v.frontmatter.tags;
        if (tags) {
          return tags.some(v =&gt; v === tag);
        }
      });
    },
    color() {
      // 标签button颜色
      let colors = [
        &quot;#3498DB&quot;,
        &quot;#3EAF7C&quot;,
        &quot;#5CBBF6&quot;,
        &quot;#f5A28E&quot;,
        &quot;#f2AC3B&quot;,
        &quot;#FA6551&quot;,
        &quot;#C68CE0&quot;
      ];
      return colors[parseInt(Math.random() * colors.length)];
    }
  },
  mounted() {
    //当路由?tag='xxx'时能自动跳转到对应内容
    let tag = this.$route.query.tag;
    if (tag) {
      this.change(tag);
    }
  }
};
&lt;/script&gt;

&lt;style lang='stylus' scoped&gt;
.tag {
  max-width: 46.5rem;
  margin: 0 auto;
  padding: 0 2.5rem;

  .items {
    margin-bottom: 2rem;

    span {
      vertical-align: middle;
      cursor: pointer;
      margin: 0.5rem 0.5rem 0.2rem;
      padding: 0.4rem 0.7rem;
      display: -webkit-inline-box;
      display: -ms-inline-flexbox;
      display: inline-flex;
      border-radius: 0.2rem;
      background: #fff;
      color: #fff;
      font-size: 1rem;
      box-shadow: 0 1px 0.25rem 0 hsla(0, 0%, 57%, 0.21);
      transition: all 0.3s;
      background-color: red;

      &amp;.active {
        transform: scale(1.2);
      }

      &amp;:hover {
        transform: scale(1.2);
      }
    }
  }
}
&lt;/style&gt;

</code></pre></div><p>其中 Article 组件是显示文章内容的部分，大家也可自行定义组件及样式，我贴上自己的 Article 组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div class=&quot;abstract&quot;&gt;
    &lt;div class=&quot;abstract-item&quot;&gt;
      &lt;div class=&quot;text-hover&quot;&gt;
        &lt;router-link :to=&quot;tag.path&quot;&gt;{{tag.title}}&lt;/router-link&gt;
      &lt;/div&gt;
      &lt;!----&gt;
      &lt;div class=&quot;abstract&quot;&gt;
        &lt;div class=&quot;tip custom-block&quot; v-if=&quot;tag.excerpt&quot;&gt;
          &lt;!-- &lt;p class=&quot;custom-block-title&quot;&gt;{{tag.title}}&lt;/p&gt;
            &lt;p&gt;个人一些自动的 vs code 配置(Settings.json)&lt;/p&gt;
            &lt;ul&gt;
            &lt;li&gt;VsCode 常用插件配置&lt;/li&gt;
          &lt;/ul&gt;--&gt;
          &lt;div v-html=&quot;tag.excerpt&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=&quot;details-btn&quot;&gt;
        &lt;router-link :to=&quot;tag.path&quot;&gt;
          &lt;div data-v-e422eb16 class=&quot;v-btn&quot;&gt;
            &lt;i data-v-e422eb16 class=&quot;what&quot;&gt;&lt;/i&gt;
            阅读全文
          &lt;/div&gt;
        &lt;/router-link&gt;
      &lt;/div&gt;
      &lt;div class=&quot;v-divider&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;article-info article-info-item&quot;&gt;
        &lt;i class=&quot;what&quot;&gt;
          &lt;em v-if=&quot;tag.lastUpdated&quot;&gt;{{tag.lastUpdated}}&lt;/em&gt;
        &lt;/i&gt;
        &lt;i class=&quot;what&quot; v-for=&quot;t in tag.frontmatter.tags&quot;&gt;
          &lt;em class=&quot;text-item active&quot; v-if=&quot;t==tg&quot;&gt;{{t}}&lt;/em&gt;
          &lt;em class=&quot;text-item&quot; v-else @click=&quot;$emit('turnTo',t)&quot;&gt;{{t}}&lt;/em&gt;
        &lt;/i&gt;
        &lt;!-- &lt;i
            class=&quot;iconfont h-classify article-info-item&quot;
            class=&quot;what&quot;
            &gt;
            &lt;em class=&quot;text-item&quot;&gt;IDE&lt;/em&gt;
        &lt;/i&gt;--&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  props: {
    tag: {}, //索引到的数据
    tg: &quot;&quot;
  }
};
&lt;/script&gt;

&lt;style lang=&quot;stylus&quot; scoped&gt;
$color = #3eaf7c;

.abstract {
  margin-top: 1rem;
  width: 100%;

  .abstract-item {
    margin: 0 auto 1.2rem;
    padding: 1rem 1.2rem;
    width: 100%;
    overflow: hidden;
    border-radius: 0.3rem;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    -webkit-transition: all 0.3s;
    transition: all 0.3s;
    -webkit-box-shadow: 0 0.25rem 1.2rem 0 hsla(0, 0%, 57%, 0.21);
    box-shadow: 0 0.25rem 1.2rem 0 hsla(0, 0%, 57%, 0.21);
    background-color: #fff;
    position: relative;

    .abstract {
    }

    .text-hover {
      position: relative;
      font-size: 1.2rem;
      line-height: 2rem;
      display: inline-block;

      a {
        &amp;:after {
          content: '';
          position: absolute;
          width: 101%;
          height: 2px;
          bottom: 0;
          left: 0;
          background-color: $color;
          visibility: hidden;
          -webkit-transform: scaleX(0);
          transform: scaleX(0);
          -webkit-transition: 0.3s ease-in-out;
          transition: 0.3s ease-in-out;
        }

        &amp;:hover:after {
          visibility: visible;
          -webkit-transform: scaleX(1);
          transform: scaleX(1);
        }
      }
    }

    .details-btn {
      text-align: right;
      margin: 0.6rem 0;

      .v-btn {
        display: inline-block;
        font-size: 0.8rem;
        padding: 0.4rem 0.7rem;
        cursor: pointer;
        letter-spacing: 0.1em;
        -webkit-transition: all 0.3s;
        transition: all 0.3s;
        background-color: #efefef;
        color: #2c3e50;
        border-radius: 0.1rem;
        line-height: 1.2;

        &amp;:hover {
          background-color: $color;
          color: #fff;
        }
      }
    }

    .article-info {
      margin-right: 1rem;
      line-height: 1.6rem;
      margin-right: 1rem;
      line-height: 1.6rem;
      font-style: normal;

      .text-item {
        font-weight: 700;
        border: 1px $color;
        font-style: normal;
        margin-left: 0.4rem;
        cursor: pointer;
        background-color: #f6f6f6;
        padding: 0.2rem 0.4rem;

        &amp;.active {
          color: $color;
        }

        &amp;:hover {
          color: $color;
        }
      }
    }

    .v-divider {
      display: block;
      -webkit-box-flex: 1;
      -ms-flex: 1 1 0px;
      flex: 1 1 0px;
      max-width: 100%;
      height: 0;
      max-height: 0;
      border: solid;
      border-width: thin 0 0 0;
      -webkit-transition: inherit;
      transition: inherit;
      border-color: rgb(234, 236, 239);
      margin-top: 0.7rem;
      margin-bottom: 0.7rem;
    }
  }
}

.what {
  font-size: 0.8rem;
  color: rgb(153, 153, 153);
}
&lt;/style&gt;

</code></pre></div><p>至此，标签云页面已经完成，效果如下
<img src="https://blog-1253495453.cos.ap-chongqing.myqcloud.com/tags.png" alt="标签云效果"></p> <h2 id="第四步-页面显示标签页及标签页跳转"><a href="#第四步-页面显示标签页及标签页跳转" aria-hidden="true" class="header-anchor">#</a> 第四步 页面显示标签页及标签页跳转</h2> <p>把默认主题中 components 下的 Page.vue 文件复制到 docs/.vuepress/theme/components 中，
修改其中内容</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;slot name=&quot;top&quot;/&gt;
&lt;!-- 以下是添加的内容 --&gt;
&lt;section class=&quot;tags&quot; v-if=&quot;this.$site.themeConfig.tags&amp;&amp;tags&amp;&amp;tags.length&gt;0&quot;&gt;
    &lt;!-- tags是this.$page.frontmatter.tags，这是通过vuepress编译markdown文件中的tags生成的标签数组。 --&gt;
    &lt;span class=&quot;tagPopup&quot; v-for=&quot;tag in tags&quot;&gt;
        &lt;!-- $site.themeConfig.tags是config.js中配置的tags目录 --&gt;
        &lt;router-link :to=&quot;'/'+$site.themeConfig.tags+'/?tag='+tag&quot; class=&quot;tag&quot;&gt;{{tag}}&lt;/router-link&gt;
    &lt;/span&gt;
&lt;/section&gt;
&lt;!-- 以上是添加的内容 --&gt;
&lt;Content/&gt;

</code></pre></div><p>修改后效果如下
<img src="https://blog-1253495453.cos.ap-chongqing.myqcloud.com/page.png" alt="page修改效果"></p></div> <footer class="page-edit" data-v-1c2bf670><!----> <!----></footer> <div class="page-nav" data-v-1c2bf670><p class="inner" data-v-1c2bf670><span class="prev" data-v-1c2bf670>
        ←
        <a href="/blog/frontend/手写一个promise.html" class="prev" data-v-1c2bf670>手写一个promise</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.291ebe70.js" defer></script><script src="/assets/js/3.512bb35b.js" defer></script><script src="/assets/js/2.1d6f122e.js" defer></script><script src="/assets/js/12.de4d1582.js" defer></script>
  </body>
</html>
